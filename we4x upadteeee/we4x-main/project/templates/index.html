{% extends "base.html" %}

{% block content %}
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

<style>
:root{
    --accent:#5678ff;
    --accent-2:#8b4bff;
    --muted:#6b7280;
    --card:#ffffff;
    --bg:#f5f7fb;
    --dark:#0f1724;
    --text:#000000;
}

.dark {
    --bg:#0f1724;
    --card:#1a2332;
    --muted:#9ca3af;
    --accent:#5678ff;
    --accent-2:#8b4bff;
    --text:#ffffff;
}

body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', sans-serif;
}

/* Smooth fade */
.fade-enter {
    opacity: 0;
    transform: translateY(-10px);
}
.fade-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: 0.35s ease;
}

/* TOP THEME TOGGLE */
.top-theme-toggle {
    position: fixed;
    top: 16px;
    right: 25px;
    z-index: 999;
    background: var(--card);
    color: var(--text);
    border-radius: 999px;
    padding: 10px 18px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: 0.3s;
    font-weight: 600;
}
.top-theme-toggle:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

/* HERO */
.hero-banner {
    position: relative;
    width: 100%;
    height: 60vh;
    background-size: cover;
    background-position: center;
    border-radius: 20px;
    overflow: hidden;
    margin-top: 80px;
    box-shadow: 0 8px 30px rgba(16,24,40,0.10);
}
.hero-overlay { position: absolute; inset: 0; background: linear-gradient(180deg,rgba(12,14,20,0.0),rgba(12,14,20,0.6)); }
.hero-text-block {
    position: absolute; z-index: 3;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    color: white; text-align: center;
}
.hero-text-block h1 {
    font-family: 'Playfair Display', serif;
    font-size: 52px; font-weight: 700;
}
.hero-text-block p { font-size: 18px; opacity: 0.9; max-width: 700px; margin: 10px auto; }

/* CARD */
.dashboard-card {
    background: var(--card);
    border-radius: 16px;
    padding: 22px;
    box-shadow: 0 8px 20px rgba(16,24,40,0.08);
    transition: .3s;
}
.dashboard-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 28px rgba(16,24,40,0.12);
}

/* GRID */
.grid { display: grid; gap: 24px; }
@media (min-width: 700px){ .grid { grid-template-columns: repeat(2,1fr); } }
@media (min-width: 1024px){ .grid { grid-template-columns: repeat(3,1fr); } }

.modal-bg { background: rgba(0,0,0,0.5); }
</style>


<!-- ‚≠ê TOP DARK MODE TOGGLE (REPLACES FLOATING BUTTON) -->
<div x-data="{ dark: false }"
     x-init="
        dark = localStorage.getItem('dark') === 'true';
        if(dark) document.documentElement.classList.add('dark');
     "
     class="fade-enter fade-enter-active">

    <div class="top-theme-toggle"
         @click="
            dark = !dark;
            localStorage.setItem('dark', dark);
            document.documentElement.classList.toggle('dark');
         ">

        <span x-show="!dark" style="font-size: 20px;">üåô</span>
        <span x-show="dark" style="font-size: 20px;">‚òÄÔ∏è</span>

        <span x-text="dark ? 'Light Mode' : 'Dark Mode'"></span>
    </div>
</div>


<div class="container mx-auto px-4">

    <!-- HERO -->
    <div class="hero-banner" style="background-image:url('{{ banner_image_url }}');">
        <div class="hero-overlay"></div>
        <div class="hero-text-block fade-enter fade-enter-active">

            <div class="badge"
                 style="display:inline-block;padding:8px 14px;border-radius:999px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);margin-bottom:16px;font-size:15px;">
                Welcome to We4X Community
            </div>

            <h1>Innovating Solutions for a Better Tomorrow</h1>
            <p>Collaborate, learn, and build with thousands of innovators & creators.</p>

            {% if not current_user.is_authenticated %}
            <a href="{{ url_for('auth.login') }}" class="hero-btn mt-3">Login / Join</a>
            {% endif %}
        </div>
    </div>


    <!-- EVENTS -->
    <section id="events" class="fade-enter fade-enter-active">
        <div class="section-title">
            <div class="tag" style="background:#fff3ed;color:#ff8a4c;padding:6px 14px;border-radius:999px;display:inline-block;font-size:14px;margin-bottom:12px;">
                Upcoming Events
            </div>
            <h2>Join Our Events</h2>
            <p>Workshops, live sessions & meetups for innovators.</p>
        </div>

        <div class="grid mt-10">
            {% for event in events %}
            <div class="dashboard-card" x-data="{ open:false }">
                <span class="event-pill">{{ event.type }}</span>

                <h3 class="text-xl font-semibold mt-3">{{ event.name }}</h3>
                <p class="text-gray-600 mt-1">{{ event.date }}</p>

                <div class="text-right mt-3">
                    <button @click="open=true" class="text-blue-600 font-medium">Learn More ‚Üí</button>
                </div>

                <!-- MODAL -->
                <div x-show="open" class="fixed inset-0 flex items-center justify-center z-50">
                    <div class="modal-bg absolute inset-0" @click="open=false"></div>
                    <div class="bg-white rounded-xl shadow-lg p-6 z-10 max-w-lg w-full">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-semibold">{{ event.name }}</h3>
                            <button @click="open=false" class="text-2xl">&times;</button>
                        </div>

                        <p><strong>Date:</strong> {{ event.date }}</p>
                        <p class="mt-2"><strong>Description:</strong> {{ event.description }}</p>

                        <div class="text-right mt-4">
                            <button @click="open=false" class="hero-btn px-4 py-2">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            {% else %}
            <div class="col-span-full text-center text-gray-500 py-10">No events right now.</div>
            {% endfor %}
        </div>
    </section>


    <!-- POSTS -->
    <section id="posts" class="mt-16 fade-enter fade-enter-active">
        <div class="section-title">
            <div class="tag" style="background:#eef7ff;color:var(--accent);padding:6px 14px;border-radius:999px;display:inline-block;font-size:14px;margin-bottom:12px;">
                Trending Insights
            </div>
            <h2>Trendy & Latest Posts</h2>
            <p>Insights, articles, and stories from our community.</p>
        </div>

        <div class="grid mt-10">
            {% for post in posts %}
            <div class="dashboard-card">
                <h3 class="text-xl font-semibold">{{ post.title }}</h3>
                <p class="text-gray-600 mt-2"><i class="fas fa-user mr-2"></i>{{ post.author }}</p>
                <p class="text-gray-500"><i class="far fa-clock mr-2"></i>{{ post.date }}</p>

                <a href="#" class="text-blue-600 font-medium mt-2 inline-block">Read More ‚Üí</a>
            </div>
            {% else %}
            <div class="col-span-full text-center text-gray-500 py-10">No posts available.</div>
            {% endfor %}
        </div>
    </section>


    <!-- WHATSAPP COMMUNITY CARD -->
    <div class="dashboard-card mt-16 text-center fade-enter fade-enter-active">
        <h3 class="text-xl font-semibold mb-2">Join Our WhatsApp Community</h3>
        <p class="text-gray-600 mb-4">Connect with developers, founders & innovators.</p>

        <a href="https://chat.whatsapp.com/D5MMxA8zvCrEQhvgHltgvn"
           target="_blank"
           class="px-5 py-3 inline-block rounded-xl shadow-lg"
           style="background:#25D366;color:white;font-weight:600;">
            Join Now üöÄ
        </a>
    </div>

</div>

{% endblock %}
